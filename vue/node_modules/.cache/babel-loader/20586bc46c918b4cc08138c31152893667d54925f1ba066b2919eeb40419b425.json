{"ast":null,"code":"import jwt_decode from 'jwt-decode';\nexport default function authMiddleware(router) {\n  router.beforeEach((to, from, next) => {\n    console.log(to.meta.requiresAuth);\n    let token = sessionStorage.getItem('Token');\n    if (to.meta.requiresAuth && !token) {\n      return next({\n        path: '/login'\n      });\n    } else if (token && to.meta.isGuest) {\n      return next({\n        path: '/admin/overview'\n      });\n    }\n    let decodedToken = jwt_decode(token);\n    let {\n      user,\n      role\n    } = decodedToken;\n    let {\n      role: metaRole\n    } = to.meta;\n    console.log(\"Decoded Token: \", decodedToken);\n    console.log(\"role: \", role, \"  ||  user: \", user);\n    console.log(\"metaRole: \", metaRole);\n    let userId = sessionStorage.getItem('UserID');\n  });\n}","map":{"version":3,"names":["jwt_decode","authMiddleware","router","beforeEach","to","from","next","console","log","meta","requiresAuth","token","sessionStorage","getItem","path","isGuest","decodedToken","user","role","metaRole","userId"],"sources":["/var/www/html/PRESTO/vue/src/auth.js"],"sourcesContent":["import jwt_decode from 'jwt-decode'\n\nexport default function authMiddleware(router) {\n  router.beforeEach((to, from, next) => {\n    console.log(to.meta.requiresAuth);\n    let token = sessionStorage.getItem('Token');\n    if (to.meta.requiresAuth && !token){\n        return next({path: '/login'});\n    } else if (token && to.meta.isGuest){\n        return next({path: '/admin/overview'});\n    }\n    \n    let decodedToken = jwt_decode(token);\n    let { user, role } = decodedToken;\n    let { role: metaRole } = to.meta;\n    console.log(\"Decoded Token: \", decodedToken);\n    console.log(\"role: \", role, \"  ||  user: \", user);\n    console.log(\"metaRole: \", metaRole);\n    let userId = sessionStorage.getItem('UserID');\n    \n  })\n}"],"mappings":"AAAA,OAAOA,UAAU,MAAM,YAAY;AAEnC,eAAe,SAASC,cAAcA,CAACC,MAAM,EAAE;EAC7CA,MAAM,CAACC,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;IACpCC,OAAO,CAACC,GAAG,CAACJ,EAAE,CAACK,IAAI,CAACC,YAAY,CAAC;IACjC,IAAIC,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIT,EAAE,CAACK,IAAI,CAACC,YAAY,IAAI,CAACC,KAAK,EAAC;MAC/B,OAAOL,IAAI,CAAC;QAACQ,IAAI,EAAE;MAAQ,CAAC,CAAC;IACjC,CAAC,MAAM,IAAIH,KAAK,IAAIP,EAAE,CAACK,IAAI,CAACM,OAAO,EAAC;MAChC,OAAOT,IAAI,CAAC;QAACQ,IAAI,EAAE;MAAiB,CAAC,CAAC;IAC1C;IAEA,IAAIE,YAAY,GAAGhB,UAAU,CAACW,KAAK,CAAC;IACpC,IAAI;MAAEM,IAAI;MAAEC;IAAK,CAAC,GAAGF,YAAY;IACjC,IAAI;MAAEE,IAAI,EAAEC;IAAS,CAAC,GAAGf,EAAE,CAACK,IAAI;IAChCF,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEQ,YAAY,CAAC;IAC5CT,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEU,IAAI,EAAE,cAAc,EAAED,IAAI,CAAC;IACjDV,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEW,QAAQ,CAAC;IACnC,IAAIC,MAAM,GAAGR,cAAc,CAACC,OAAO,CAAC,QAAQ,CAAC;EAE/C,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}