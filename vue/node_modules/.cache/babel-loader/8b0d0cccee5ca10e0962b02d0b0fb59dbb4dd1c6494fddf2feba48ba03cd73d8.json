{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/html/PRESTO/vue/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/var/www/html/PRESTO/vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport 'd3';\nimport * as d3 from 'd3';\nimport 'topojson';\nimport DataMap from 'datamaps';\nimport { throttle } from \"src/util/throttle\";\nexport default {\n  data: function data() {\n    return {\n      color1: '#AAAAAA',\n      color2: '#444444',\n      highlightFillColor: '#66615B',\n      highlightBorderColor: '#f1f1f1',\n      mapData: {\n        'AUS': 760,\n        'BRA': 550,\n        'CAN': 120,\n        'DEU': 1300,\n        'FRA': 540,\n        'GBR': 690,\n        'GEO': 200,\n        'IND': 200,\n        'ROU': 600,\n        'RUS': 300,\n        'USA': 2920\n      }\n    };\n  },\n  methods: {\n    generateColors: function generateColors(length) {\n      return d3.scaleLinear().domain([0, length]).range([this.color1, this.color2]);\n    },\n    generateMapColors: function generateMapColors() {\n      var mapDataValues = Object.values(this.mapData);\n      var maxVal = Math.max.apply(Math, mapDataValues);\n      var colors = this.generateColors(maxVal);\n      var mapData = {};\n      var fills = {\n        defaultFill: \"#e4e4e4\"\n      };\n      for (var key in this.mapData) {\n        var val = this.mapData[key];\n        fills[key] = colors(val);\n        mapData[key] = {\n          fillKey: key,\n          value: val\n        };\n      }\n      return {\n        mapData: mapData,\n        fills: fills\n      };\n    },\n    initVectorMap: function initVectorMap() {\n      var _this$generateMapColo = this.generateMapColors(),\n        fills = _this$generateMapColo.fills,\n        mapData = _this$generateMapColo.mapData;\n      var worldMap = new DataMap({\n        scope: 'world',\n        element: document.getElementById(\"worldMap\"),\n        fills: fills,\n        data: mapData,\n        responsive: true,\n        geographyConfig: {\n          borderWidth: 0.5,\n          borderOpacity: 0.8,\n          highlightFillColor: this.highlightFillColor,\n          highlightBorderColor: this.highlightBorderColor,\n          highlightBorderWidth: 0.5,\n          highlightBorderOpacity: 0.8\n        }\n      });\n      var resizeFunc = worldMap.resize.bind(worldMap);\n      window.addEventListener('resize', function () {\n        throttle(resizeFunc, 40);\n      }, false);\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n    return _asyncToGenerator(_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _this.initVectorMap();\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  }\n};","map":{"version":3,"names":["d3","DataMap","throttle","data","color1","color2","highlightFillColor","highlightBorderColor","mapData","methods","generateColors","length","scaleLinear","domain","range","generateMapColors","mapDataValues","Object","values","maxVal","Math","max","apply","colors","fills","defaultFill","key","val","fillKey","value","initVectorMap","_this$generateMapColo","worldMap","scope","element","document","getElementById","responsive","geographyConfig","borderWidth","borderOpacity","highlightBorderWidth","highlightBorderOpacity","resizeFunc","resize","bind","window","addEventListener","mounted","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop"],"sources":["src/components/Dashboard/Views/Maps/WorldMap.vue"],"sourcesContent":["<template>\n  <div id=\"worldMap\" style=\"height: 300px;\"></div>\n</template>\n<script>\n  import 'd3';\n  import * as d3 from 'd3';\n  import 'topojson';\n  import DataMap from 'datamaps'\n  import { throttle } from \"src/util/throttle\";\n\n  export default {\n    data() {\n      return {\n        color1: '#AAAAAA',\n        color2: '#444444',\n        highlightFillColor: '#66615B',\n        highlightBorderColor: '#f1f1f1',\n        mapData: {\n          'AUS': 760,\n          'BRA': 550,\n          'CAN': 120,\n          'DEU': 1300,\n          'FRA': 540,\n          'GBR': 690,\n          'GEO': 200,\n          'IND': 200,\n          'ROU': 600,\n          'RUS': 300,\n          'USA': 2920\n        }\n      }\n    },\n    methods: {\n      generateColors(length) {\n        return d3.scaleLinear()\n          .domain([0, length])\n          .range([this.color1, this.color2]);\n      },\n      generateMapColors() {\n        let mapDataValues = Object.values(this.mapData);\n        let maxVal = Math.max(...mapDataValues);\n        let colors = this.generateColors(maxVal);\n        let mapData = {};\n        let fills = {\n          defaultFill: \"#e4e4e4\",\n        };\n        for (let key in this.mapData) {\n          let val = this.mapData[key];\n          fills[key] = colors(val);\n          mapData[key] = {\n            fillKey: key,\n            value: val\n          };\n        }\n        return {\n          mapData,\n          fills\n        }\n      },\n      initVectorMap() {\n        let { fills, mapData } = this.generateMapColors();\n        let worldMap = new DataMap({\n          scope: 'world',\n          element: document.getElementById(\"worldMap\"),\n          fills,\n          data: mapData,\n          responsive: true,\n          geographyConfig: {\n            borderWidth: 0.5,\n            borderOpacity: 0.8,\n            highlightFillColor: this.highlightFillColor,\n            highlightBorderColor: this.highlightBorderColor,\n            highlightBorderWidth: 0.5,\n            highlightBorderOpacity: 0.8\n          },\n        });\n        let resizeFunc = worldMap.resize.bind(worldMap);\n        window.addEventListener('resize', () => {\n          throttle(resizeFunc, 40)\n        }, false);\n      }\n    },\n    async mounted() {\n      this.initVectorMap()\n    }\n  }\n</script>\n<style>\n</style>\n"],"mappings":";;;AAIA;AACA,YAAAA,EAAA;AACA;AACA,OAAAC,OAAA;AACA,SAAAC,QAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,MAAA;MACAC,MAAA;MACAC,kBAAA;MACAC,oBAAA;MACAC,OAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;EACA;EACAC,OAAA;IACAC,cAAA,WAAAA,eAAAC,MAAA;MACA,OAAAX,EAAA,CAAAY,WAAA,GACAC,MAAA,KAAAF,MAAA,GACAG,KAAA,OAAAV,MAAA,OAAAC,MAAA;IACA;IACAU,iBAAA,WAAAA,kBAAA;MACA,IAAAC,aAAA,GAAAC,MAAA,CAAAC,MAAA,MAAAV,OAAA;MACA,IAAAW,MAAA,GAAAC,IAAA,CAAAC,GAAA,CAAAC,KAAA,CAAAF,IAAA,EAAAJ,aAAA;MACA,IAAAO,MAAA,QAAAb,cAAA,CAAAS,MAAA;MACA,IAAAX,OAAA;MACA,IAAAgB,KAAA;QACAC,WAAA;MACA;MACA,SAAAC,GAAA,SAAAlB,OAAA;QACA,IAAAmB,GAAA,QAAAnB,OAAA,CAAAkB,GAAA;QACAF,KAAA,CAAAE,GAAA,IAAAH,MAAA,CAAAI,GAAA;QACAnB,OAAA,CAAAkB,GAAA;UACAE,OAAA,EAAAF,GAAA;UACAG,KAAA,EAAAF;QACA;MACA;MACA;QACAnB,OAAA,EAAAA,OAAA;QACAgB,KAAA,EAAAA;MACA;IACA;IACAM,aAAA,WAAAA,cAAA;MACA,IAAAC,qBAAA,QAAAhB,iBAAA;QAAAS,KAAA,GAAAO,qBAAA,CAAAP,KAAA;QAAAhB,OAAA,GAAAuB,qBAAA,CAAAvB,OAAA;MACA,IAAAwB,QAAA,OAAA/B,OAAA;QACAgC,KAAA;QACAC,OAAA,EAAAC,QAAA,CAAAC,cAAA;QACAZ,KAAA,EAAAA,KAAA;QACArB,IAAA,EAAAK,OAAA;QACA6B,UAAA;QACAC,eAAA;UACAC,WAAA;UACAC,aAAA;UACAlC,kBAAA,OAAAA,kBAAA;UACAC,oBAAA,OAAAA,oBAAA;UACAkC,oBAAA;UACAC,sBAAA;QACA;MACA;MACA,IAAAC,UAAA,GAAAX,QAAA,CAAAY,MAAA,CAAAC,IAAA,CAAAb,QAAA;MACAc,MAAA,CAAAC,gBAAA;QACA7C,QAAA,CAAAyC,UAAA;MACA;IACA;EACA;EACAK,OAAA,WAAAA,QAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,CAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;MAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YACAT,KAAA,CAAAnB,aAAA;UAAA;UAAA;YAAA,OAAA0B,QAAA,CAAAG,IAAA;QAAA;MAAA,GAAAN,OAAA;IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}